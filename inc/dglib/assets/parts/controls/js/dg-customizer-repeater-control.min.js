!function(n,e){"use strict";var o=n(document),l=(n(window),{Snipits:{Generate_Value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},RepeaterToggle:function(){n(this).next().slideToggle(),n(this).closest(".dg-repeater-field-control").toggleClass("expanded")},RepeaterClose:function(){n(this).closest(".repeater-fields").slideUp(),n(this).closest(".dg-repeater-field-control").toggleClass("expanded")},RemoveRepeaterField:function(e){var t=l.Snipits,a=n(this).closest(".dg-repeater-field-wrap-control");return void 0!==n(this).parent()&&n(this).closest(".dg-repeater-field-control").slideUp("normal",function(){n(this).remove(),t.RefreshRepeaterValues(a)}),!1},RefreshRepeaterValues:function(e){((e=e||"")||n(".dg-repeater-field-wrap-control")).each(function(){var e=[],t=n(this);t.find(".dg-repeater-field-control").each(function(){var t,a={};n(this).find("[data-name]").each(function(){if("checkbox"===n(this).attr("type"))t=n(this).is(":checked")?1:"";else if("radio"===n(this).attr("type")){if(0==(t=n(this).is(":checked")?n(this).val():"").length)return}else t=n(this).val();var e=n(this).attr("data-name");a[e]=t}),e.push(a)}),console.log(e),t.next(".dg-repeater-collection").val(JSON.stringify(e)).trigger("change")})},RepeaterControl:function(){var e=n(this).parent(),t=l.Snipits,i=t.Generate_Value(5);if(void 0!==e){var a=e.find(".dg-repeater-field-generator").html();void 0!==(a=n(n.parseHTML(a)))&&(a.find("input[type='text'][data-name]").each(function(){var e=n(this).attr("data-default");if(n(this).val(e),n(this).hasClass("dg-color-picker")){var t={change:function(e,t){var a=t.color.toString();console.log("Color is "+a),n(this).val(a)}};n(this).wpColorPicker(t)}}),a.find("input[type='radio'][data-name]").each(function(){var e=n(this).attr("id"),t=n(this).attr("name"),a=e+"_"+i,r=t+"_"+i;n(this).attr("id",a),n(this).siblings("label").attr("for",a),n(this).attr("name",r)}),a.find("textarea[data-name]").each(function(){var e=n(this).attr("data-default");n(this).val(e)}),a.find("select[data-name]").each(function(){var e=n(this).attr("data-default");n(this).val(e)}),a.find(".single-field").show(),e.find(".dg-repeater-field-wrap-control").append(a),a.addClass("expanded").find(".repeater-fields").show(),n(".accordion-section-content").animate({scrollTop:e.height()},1e3),t.RefreshRepeaterValues(e.find(".dg-repeater-field-wrap-control")))}return!1}},Click:function(){var a=l.Snipits,e=a.RepeaterToggle;o.on("click",".repeater-field-title",e);var t=a.RepeaterClose;o.on("click",".repeater-field-close",t);var r=a.RepeaterControl;o.on("click",".dg-repeater-add-control-field",r);var i=a.RemoveRepeaterField;o.on("click",".repeater-field-remove",i),o.on("keyup change","[data-name]",function(){var e=n(this).closest(".dg-repeater-field-wrap-control");return a.RefreshRepeaterValues(e),!1}),n(".dg-repeater-field-wrap-control").sortable({orientation:"vertical",update:function(e,t){a.RefreshRepeaterValues()}})},Ready:function(){var e=l,t=e.Snipits;e.Click(),t.RepeaterToggle()},Load:function(){},Resize:function(){},Scroll:function(){},Init:function(){var e,t=l;e=t.Ready,t.Load,t.Resize,t.Scroll,o.ready(e)}});l.Init()}(jQuery,wp.customize);